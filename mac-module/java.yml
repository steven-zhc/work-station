---
# Java Development Environment Setup

- name: Install OpenJDK via Homebrew
  homebrew:
    name: openjdk
    state: present
  tags:
    - java-all
    - jdk

- name: Set OpenJDK path based on architecture
  set_fact:
    openjdk_path: "{{ '/opt/homebrew/opt/openjdk/libexec/openjdk.jdk' if ansible_architecture == 'arm64' else '/usr/local/opt/openjdk/libexec/openjdk.jdk' }}"
  tags:
    - java-all
    - jdk

- name: Create symlink for OpenJDK
  file:
    src: "{{ openjdk_path }}"
    dest: /Library/Java/JavaVirtualMachines/openjdk.jdk
    state: link
  become: yes
  tags:
    - java-all
    - jdk

- name: Install Maven
  homebrew:
    name: maven
    state: present
  tags:
    - java-all
    - maven

- name: Install Gradle
  homebrew:
    name: gradle
    state: present
  tags:
    - java-all
    - gradle
